% my $menu;
% $menu = 'default';

<&| /includes/header/index.html, title => 'Zoovy.com Site Map', menu => $menu &></&>
% ## Do not touch anything above this line except for the value of the title var.

<&| /includes/sitemap.html &></&>
<%perl>

use Data::Dumper;
my $pages = build_sitemap();

## low tech sitemap generation
##	output:
##	<b>level1 A</b>
##		<ul>
##		<li> <a href="link">level2 A</a>
##		<li> <a href="link">level2 B</a>
##		</ul>
##	<b>level1 B</b>
foreach my $level1 (@{$pages}) {
	print qq~<a href=\"$level1->{'href'}\"><b>$level1->{'title'}</b></a>~;
	if ((defined $level1->{'pages'}) && (ref($level1->{'pages'}) eq 'ARRAY')) {
		print qq~<ul>\n~;
		foreach my $level2 (@{$level1->{'pages'}}) {
## do not print out pages/partners that have no href.
			if($level2->{'href'} ne '')	{
				print qq~<li> <a href='$level2->{'href'}'>$level2->{'title'}</a></li>~;
				}
			## if we ever need a level 3.. it would go here.
			}
		print qq~</ul>\n~;
		}
	
	}

</%perl>

% # Do not touch anything below this line.
<&| /includes/footer/index.html, menu => $menu &></&>