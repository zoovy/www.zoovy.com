my %o;
for (split(/&/,$o)) {
    $_ =~ s/\+/ /g;
    my($key,$val) = split(/=/,$_,2);
    for ($key,$val) {
        $_ =~ s/%([0-9a-fA-F][0-9a-fA-F])/chr(hex($1))/ge;
    }
    $o{$key} = $val;
}

my @bitems;
my $bi;

for ($bi=1; $bi<=$o{'Item-Count'}; $bi++) {	
	my $c = '';
	foreach my $k (keys %o) {
		if ($k =~ /Item\-Option\-$bi\-(.*?)$/) {
			$c .= " ".$1."=".$o{$k}."\n";
			}
		}
	$o{"Item-Options-$bi"} = $c;
	}

for ($bi=1; $bi<=$o{'Item-Count'}; $bi++) {
	$o{"Item-Price-$bi"} = $o{"Item-Unit-Price-$bi"}
	}

my @items;
my $i;
for ($i=1; $i<=$o{'Item-Count'}; $i++) {
	push(@items,{map {($_,$o{"Item-$_-$i"})} qw(Id Code Quantity Price Description Url Options)});
	}

&handle_order(\%o,@items);
